# Interview Coach Web

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –∏–Ω—Ç–µ—Ä–≤—å—é –ø–æ –≤–∞—à–∏–º –∫–æ–Ω—Å–ø–µ–∫—Ç–∞–º –≤ Markdown.

–ü—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–≤—É—Ö —Ä–µ–∂–∏–º–∞—Ö:
- `Smart` —Ä–µ–∂–∏–º: LLM –∑–∞–¥–∞–µ—Ç/–ø–æ–¥–±–∏—Ä–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã, –¥–∞–µ—Ç —Ñ–∏–¥–±–µ–∫ –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞–µ—Ç –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.
- `Simple` —Ä–µ–∂–∏–º: –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π/–≤–∑–≤–µ—à–µ–Ω–Ω—ã–π –ø—Ä–æ—Ö–æ–¥ –ø–æ –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–º Q/A –∏–∑ –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤, —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —á–∞—Ç-–æ–±—Å—É–∂–¥–µ–Ω–∏–µ–º.

---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [1. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç](#about)
- [2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö](#architecture)
- [3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è](#repo-structure)
- [4. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏](#requirements)
- [5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#setup)
- [6. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `.env`](#env)
- [7. –§–æ—Ä–º–∞—Ç –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤ (–∫—Ä–∏—Ç–∏—á–Ω–æ)](#content-format)
- [8. –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º](#how-to-use)
- [9. WebSocket/HTTP –ø—Ä–æ—Ç–æ–∫–æ–ª](#protocol)
- [10. –õ–æ–≥–∏, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏ –≥–¥–µ —á—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å](#logs)
- [11. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–¥–∞](#dev)
- [12. –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è](#troubleshooting)
- [13. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#limitations)
- [14. –ö—Ä–∞—Ç–∫–∏–π —á–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ–º](#checklist)

---

<a id="about"></a>
## 1. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç

–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è: –≤—ã —Ç—Ä–µ–Ω–∏—Ä—É–µ—Ç–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Å–≤–æ–∏–º –∂–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º (`conspects/*.md`), –∞ —Å–∏—Å—Ç–µ–º–∞:
- –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–µ–º—É –∏ –≤–æ–ø—Ä–æ—Å;
- –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –∫–æ–Ω—Å–ø–µ–∫—Ç–∞;
- –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–∞—à –æ—Ç–≤–µ—Ç (—Ç–µ–∫—Å—Ç–æ–º –∏–ª–∏ –≥–æ–ª–æ—Å–æ–º);
- –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ LLM –ø–æ —Ä—É–±—Ä–∏–∫–µ;
- —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –≤ `runs/<timestamp>/history.jsonl`;
- –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Å—Ç—Ä–æ–∏—Ç summary –ø–æ —Å–ª–∞–±—ã–º/—Å–∏–ª—å–Ω—ã–º —Ç–µ–º–∞–º.

–ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- –µ–¥–∏–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (`FastAPI + static HTML/CSS/JS`);
- –≥–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ (`MediaRecorder` –≤ –±—Ä–∞—É–∑–µ—Ä–µ + `faster-whisper` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ);
- –≤—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤-–∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤ –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º;
- –≤ `Simple` —Ä–µ–∂–∏–º–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–µ—Å–æ–≤ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (—Å—É–º–º–∞ 100%);
- debug drawer —Å —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏.

---

<a id="architecture"></a>
## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### 2.1 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- `app/main.py`: FastAPI entrypoint, HTTP + WebSocket, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤/–º–æ–¥–µ–ª–µ–π.
- `app/coach_engine.py`: —Å–µ—Å—Å–∏–∏ `Smart` —Ä–µ–∂–∏–º–∞, –≤—ã–±–æ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤, –æ—Ü–µ–Ω–∫–∞, –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.
- `interview_coach_core/parsing.py`: –ø–∞—Ä—Å–µ—Ä Markdown –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.
- `interview_coach_core/openrouter.py`: —Å–æ–∑–¥–∞–Ω–∏–µ LLM-–∫–ª–∏–µ–Ω—Ç–æ–≤ OpenRouter.
- `interview_coach_core/stt.py`: –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `faster-whisper`.
- `app/static/*`: –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (UI, —Å–æ–±—ã—Ç–∏—è, WebSocket –∫–ª–∏–µ–Ω—Ç, voice UX).

### 2.2 –ü–æ—Ç–æ–∫ –≤ Smart —Ä–µ–∂–∏–º–µ

1. –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ `/ws`.
2. –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `hello` (—Ñ–ª–∞–≥–∏ `has_llm`, `has_stt`, —Å–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, –∫–æ–Ω—Ñ–∏–≥).
3. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `start` —Å `mode: "smart"` –∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏.
4. `CoachEngine.start_or_next_question` –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–µ–º—É –∏ –≤–æ–ø—Ä–æ—Å, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–æ–ø—Ä–æ—Å/—Ä—É–±—Ä–∏–∫—É.
5. –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `question`.
6. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `answer`.
7. `CoachEngine.submit_answer` –≤—ã–∑—ã–≤–∞–µ—Ç Evaluator LLM —Å `EVAL_SYSTEM`, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç JSON —á–µ—Ä–µ–∑ pydantic.
8. –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `feedback`, –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—á–µ—Ç—á–∏–∫, –ø–∏—à–µ—Ç `history.jsonl`.
9. –ö–∞–∂–¥—ã–µ `ANALYZE_EVERY_N` –æ—Ç–≤–µ—Ç–æ–≤ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è `run_analysis` –∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç `analysis`.

### 2.3 –ü–æ—Ç–æ–∫ –≤ Simple —Ä–µ–∂–∏–º–µ

1. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `start` —Å `mode: "simple"`, –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –∏ –≤–µ—Å–∞–º–∏.
2. –°–µ—Ä–≤–µ—Ä —Å—Ç—Ä–æ–∏—Ç `SimpleSessionState` (–æ—á–µ—Ä–µ–¥–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Ñ–∞–π–ª–∞–º, –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Å–∞).
3. –ù–∞ `next` –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–æ –≤–µ—Å–∞–º –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `simple_question`.
4. –ù–∞ `simple_skip` —Ç–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å —É—Ö–æ–¥–∏—Ç –≤ –æ—á–µ—Ä–µ–¥—å –ø–æ–≤—Ç–æ—Ä–æ–≤.
5. –ö–æ–≥–¥–∞ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å, –æ—Ç–¥–∞—é—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã –∏–∑ `skipped_queue`.
6. –ü–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä —à–ª–µ—Ç `simple_done`.
7. –°–æ–æ–±—â–µ–Ω–∏—è `simple_chat` –∏–¥—É—Ç –≤ LLM (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–ª—é—á OpenRouter).

---

<a id="repo-structure"></a>
## 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```text
.
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îú‚îÄ‚îÄ coach_engine.py
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ static/
‚îÇ       ‚îú‚îÄ‚îÄ index.html
‚îÇ       ‚îú‚îÄ‚îÄ app.js
‚îÇ       ‚îî‚îÄ‚îÄ style.css
‚îú‚îÄ‚îÄ interview_coach_core/
‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îú‚îÄ‚îÄ parsing.py
‚îÇ   ‚îú‚îÄ‚îÄ strategy.py
‚îÇ   ‚îú‚îÄ‚îÄ prompts.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îú‚îÄ‚îÄ logging_utils.py
‚îÇ   ‚îú‚îÄ‚îÄ openrouter.py
‚îÇ   ‚îú‚îÄ‚îÄ stt.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ conspects/
‚îÇ   ‚îî‚îÄ‚îÄ *.md
‚îú‚îÄ‚îÄ runs/
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ requirements.txt
```

### 3.1 –ß—Ç–æ –∑–∞ —á—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç (—Ñ–∞–π–ª—ã)

| –ü—É—Ç—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---|---|
| `app/main.py` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, startup-–∑–∞–≥—Ä—É–∑–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤/–º–æ–¥–µ–ª–µ–π, endpoint'—ã `/`, `/ws`, `/stt` |
| `app/coach_engine.py` | –°–æ—Å—Ç–æ—è–Ω–∏–µ smart-—Å–µ—Å—Å–∏–∏, –≤—ã–±–æ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤, –≤—ã–∑–æ–≤ –æ—Ü–µ–Ω—â–∏–∫–∞/–∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –∑–∞–ø–∏—Å—å –∏—Å—Ç–æ—Ä–∏–∏ |
| `app/static/app.js` | –õ–æ–≥–∏–∫–∞ UI, –æ–±—Ä–∞–±–æ—Ç–∫–∞ ws-—Å–æ–æ–±—â–µ–Ω–∏–π, —Ä–µ–∂–∏–º—ã Smart/Simple, –≥–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ |
| `app/static/index.html` | –†–∞–∑–º–µ—Ç–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (topbar, –∫–∞—Ä—Ç–æ—á–∫–∞ –≤–æ–ø—Ä–æ—Å–∞, –ª–µ–Ω—Ç–∞, drawers) |
| `app/static/style.css` | –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏ responsive-–ø–æ–≤–µ–¥–µ–Ω–∏–µ |
| `interview_coach_core/config.py` | Dataclass-–∫–æ–Ω—Ñ–∏–≥ –∏–∑ env-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö |
| `interview_coach_core/parsing.py` | –ü–∞—Ä—Å–∏–Ω–≥ markdown, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤, —Å–±–æ—Ä –∏–Ω–¥–µ–∫—Å–æ–≤ |
| `interview_coach_core/strategy.py` | –≠–≤—Ä–∏—Å—Ç–∏–∫–∏ –≤—ã–±–æ—Ä–∞ —Ç–µ–º –∏ –≤–æ–ø—Ä–æ—Å–æ–≤ |
| `interview_coach_core/prompts.py` | –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –∏ robust JSON parser |
| `interview_coach_core/models.py` | Pydantic-—Å—Ö–µ–º—ã –æ—Ç–≤–µ—Ç–æ–≤ LLM |
| `interview_coach_core/logging_utils.py` | –†–∞–±–æ—Ç–∞ —Å `runs/`, JSONL-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ |
| `interview_coach_core/openrouter.py` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ `ChatOpenAI` –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ–¥ OpenRouter |
| `interview_coach_core/stt.py` | –ó–∞–≥—Ä—É–∑–∫–∞ whisper-–º–æ–¥–µ–ª–∏ –∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è –∞—É–¥–∏–æ |
| `conspects/*.md` | –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –≤–æ–ø—Ä–æ—Å–æ–≤/—Ç–µ–æ—Ä–∏–∏ –¥–ª—è –æ–±–µ–∏—Ö —Ä–µ–∂–∏–º–æ–≤ |
| `runs/` | –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–µ—Å—Å–∏–π: –∏—Å—Ç–æ—Ä–∏—è, snapshot —Ç–µ–º |

---

<a id="requirements"></a>
## 4. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ú–∏–Ω–∏–º—É–º:
- Python 3.9+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 3.10/3.11);
- –¥–æ—Å—Ç—É–ø –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–ª—è –≤—ã–∑–æ–≤–æ–≤ OpenRouter (–¥–ª—è `Smart` —Ä–µ–∂–∏–º–∞ –∏ `Simple chat`);
- –º–∏–∫—Ä–æ—Ñ–æ–Ω + –±—Ä–∞—É–∑–µ—Ä —Å `MediaRecorder` (–¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞);
- `ffmpeg` –≤ —Å–∏—Å—Ç–µ–º–µ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É–¥–∏–æ `faster-whisper`.

Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`requirements.txt`):
- `fastapi>=0.110`
- `uvicorn[standard]>=0.23`
- `langchain>=0.2`
- `langchain-openai>=0.1.20`
- `pydantic>=2.0`
- `python-dotenv>=1.0`
- `faster-whisper>=1.0`
- `soundfile>=0.12`

---

<a id="setup"></a>
## 5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 5.1 –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
pip install -r requirements.txt
uvicorn app.main:app --reload --host 127.0.0.1 --port 8000
```

–û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- `http://127.0.0.1:8000`

### 5.2 –í–∞–∂–Ω–æ –ø—Ä–æ –∫–æ–Ω—Ç–µ–Ω—Ç

–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ —á–∏—Ç–∞–µ—Ç `NOTES_DIR` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `conspects/`).
–ï—Å–ª–∏ –≤ –ø–∞–ø–∫–µ –Ω–µ—Ç `*.md` —Ñ–∞–π–ª–æ–≤, startup —É–ø–∞–¥–µ—Ç —Å –æ—à–∏–±–∫–æ–π.

### 5.3 –ï—Å–ª–∏ –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ Simple –±–µ–∑ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è

`Simple` —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ `OPENROUTER_API_KEY` –¥–ª—è –ø–æ–∫–∞–∑–∞ Q/A.
–ù–æ —á–∞—Ç –≤ `Simple` —Ä–µ–∂–∏–º–µ (`simple_chat`) –±–µ–∑ –∫–ª—é—á–∞ –±—É–¥–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

---

<a id="env"></a>
## 6. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `.env`

`Config.from_env()` —á–∏—Ç–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|---|---|---|
| `NOTES_DIR` | `conspects` | –ü–∞–ø–∫–∞ —Å Markdown-–∫–æ–Ω—Å–ø–µ–∫—Ç–∞–º–∏ |
| `RUNS_DIR` | `runs` | –ü–∞–ø–∫–∞ –¥–ª—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å–µ—Å—Å–∏–π |
| `ANALYZE_EVERY_N` | `30` | –ß–∞—Å—Ç–æ—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ Smart —Ä–µ–∂–∏–º–µ |
| `MAX_QUESTIONS_PER_SOURCE` | `0` | –õ–∏–º–∏—Ç –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Ñ–∞–π–ª (`0` = –±–µ–∑ –ª–∏–º–∏—Ç–∞) |
| `OPENROUTER_API_KEY` | `""` | –ö–ª—é—á OpenRouter |
| `OPENROUTER_MODEL` | `deepseek/deepseek-chat` | –ú–æ–¥–µ–ª—å –¥–ª—è generation/eval |
| `APP_HTTP_REFERER` | `http://localhost` | –ó–∞–≥–æ–ª–æ–≤–æ–∫ `HTTP-Referer` –¥–ª—è OpenRouter |
| `APP_TITLE` | `InterviewCoachWeb` | –ó–∞–≥–æ–ª–æ–≤–æ–∫ `X-Title` –¥–ª—è OpenRouter |
| `LLM_TIMEOUT_S` | `120` | –¢–∞–π–º–∞—É—Ç LLM-–∑–∞–ø—Ä–æ—Å–∞ (—Å–µ–∫) |
| `WHISPER_MODEL` | `large-v3` | –ú–æ–¥–µ–ª—å `faster-whisper` |
| `WHISPER_DEVICE` | `cpu` | `cpu` –∏–ª–∏ `cuda` |
| `WHISPER_COMPUTE_TYPE` | `int8` | –¢–∏–ø –≤—ã—á–∏—Å–ª–µ–Ω–∏–π (`int8`, `float16`, ...) |
| `WHISPER_INITIAL_PROMPT` | (tech prompt) | –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è —Ç–µ—Ä–º–∏–Ω–æ–≤ –ø—Ä–∏ STT |
| `WHISPER_LANGUAGE` | `""` | –Ø–∑—ã–∫ –¥–ª—è STT (`""` = –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ) |
| `WHISPER_BEAM_SIZE` | `2` | Beam size (–º–µ–Ω—å—à–µ = –±—ã—Å—Ç—Ä–µ–µ) |
| `WHISPER_CONDITION_ON_PREV` | `true` | –£—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–µ–∫—Å—Ç –ø—Ä–∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–∏ |

–ü—Ä–∏–º–µ—Ä `.env`:

```env
OPENROUTER_API_KEY=your_openrouter_key
OPENROUTER_MODEL=deepseek/deepseek-chat
NOTES_DIR=conspects
RUNS_DIR=runs
ANALYZE_EVERY_N=30
MAX_QUESTIONS_PER_SOURCE=0
WHISPER_MODEL=large-v3
WHISPER_DEVICE=cpu
WHISPER_COMPUTE_TYPE=int8
```

---

<a id="content-format"></a>
## 7. –§–æ—Ä–º–∞—Ç –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤ (–∫—Ä–∏—Ç–∏—á–Ω–æ)

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

### 7.1 –§–æ—Ä–º–∞—Ç –¥–ª—è Smart —Ä–µ–∂–∏–º–∞ (`build_content_index`)

`Smart` —Ç–µ–º—ã —Å—Ç—Ä–æ—è—Ç—Å—è –ø–æ —Å–µ–∫—Ü–∏—è–º `###` –∏–ª–∏ `####`.

–ü—Ä–∞–≤–∏–ª–∞:
- —Ç–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ 3 –∏ 4 –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ç–µ–º—ã;
- –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏ = `topic.title`;
- —Ç–µ–∫—Å—Ç —Å–µ–∫—Ü–∏–∏ = `topic.theory`;
- –≤–æ–ø—Ä–æ—Å—ã –≤–Ω—É—Ç—Ä–∏ —Å–µ–∫—Ü–∏–∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è —ç–≤—Ä–∏—Å—Ç–∏–∫–∞–º–∏ `extract_questions`.

`extract_questions` —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç:
- —Å—Ç—Ä–æ–∫–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏ `Q:`, `Q -`, `–í–æ–ø—Ä–æ—Å:`, `Question:`;
- –ø—É–Ω–∫—Ç—ã —Å–ø–∏—Å–∫–æ–≤/–Ω—É–º–µ—Ä–∞—Ü–∏–∏, –µ—Å–ª–∏ –µ—Å—Ç—å `?` –∏–ª–∏ –Ω–∞—á–∞–ª–æ —Å `–∫–∞–∫/–ø–æ—á–µ–º—É/—á—Ç–æ/...`;
- –∫–æ—Ä–æ—Ç–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ –¥–æ 200 —Å–∏–º–≤–æ–ª–æ–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ `?`.

### 7.2 –§–æ—Ä–º–∞—Ç –¥–ª—è Simple —Ä–µ–∂–∏–º–∞ (`build_simple_index`)

–í `Simple` —Ä–µ–∂–∏–º–µ –Ω—É–∂–Ω—ã –ø–∞—Ä—ã –≤–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç:
- –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤–æ–ø—Ä–æ—Å–∞: `### –í–æ–ø—Ä–æ—Å: ...` –∏–ª–∏ `#### –í–æ–ø—Ä–æ—Å: ...`;
- –æ—Ç–≤–µ—Ç –æ–∂–∏–¥–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ –≤–∏–¥–∞ `**–û—Ç–≤–µ—Ç:**`.

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω:

```markdown
## –í–æ–ø—Ä–æ—Å—ã

### –¢–µ–º–∞

#### –í–æ–ø—Ä–æ—Å: –ß—Ç–æ —Ç–∞–∫–æ–µ overfitting?
**–û—Ç–≤–µ—Ç:**
–ö—Ä–∞—Ç–∫–∏–π –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç...
```

–î–ª—è `Simple` —Ä–µ–∂–∏–º–∞ —Ç–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è `subtopic` –∏–∑ –±–ª–∏–∂–∞–π—à–µ–≥–æ `###` –∑–∞–≥–æ–ª–æ–≤–∫–∞.

### 7.3 –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É

- –¥–µ—Ä–∂–∏—Ç–µ –æ–¥–∏–Ω –ª–æ–≥–∏—á–µ—Å–∫–∏–π –¥–æ–º–µ–Ω –Ω–∞ —Ñ–∞–π–ª (`Python`, `NLP`, `SQL` –∏ —Ç.–¥.);
- –ø–∏—à–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ;
- –≤ –æ—Ç–≤–µ—Ç–µ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ —Ö–æ—Ä–æ—à–µ–≥–æ –æ—Ç–≤–µ—Ç–∞, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ;
- –∏–∑–±–µ–≥–∞–π—Ç–µ –æ–≥—Ä–æ–º–Ω—ã—Ö —Å–µ–∫—Ü–∏–π –±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ `###/####`, –∏–Ω–∞—á–µ —Ç–µ–º—ã –Ω–µ –≤—ã–¥–µ–ª—è—Ç—Å—è.

---

<a id="how-to-use"></a>
## 8. –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

### 8.1 –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

- –≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å: —Å—Ç–∞—Ç—É—Å, –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å `Smart/Simple`, –∫–Ω–æ–ø–∫–∏ `–ù–∞—á–∞—Ç—å/–î–∞–ª–µ–µ`, `–ù–æ–≤–∞—è —Å–µ—Å—Å–∏—è`, `–û—Ç–ª–∞–¥–∫–∞`;
- –∫–∞—Ä—Ç–æ—á–∫–∞ –≤–æ–ø—Ä–æ—Å–∞: —Ç–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å, –∏—Å—Ç–æ—á–Ω–∏–∫, –ø—Ä–æ–≥—Ä–µ—Å—Å, –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –ø–æ–∫–∞–∑–∞ –∫–æ–Ω—Å–ø–µ–∫—Ç–∞/–æ—Ç–≤–µ—Ç–∞;
- –ª–µ–Ω—Ç–∞: –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ñ–∏–¥–±–µ–∫, –∞–Ω–∞–ª–∏–∑, —á–∞—Ç;
- drawer `–í—ã–±–æ—Ä —Ç–µ–º`: –≤—ã–±–æ—Ä —Ñ–∞–π–ª–æ–≤, –≤ `Simple` —Ä–µ–∂–∏–º–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ—Å–æ–≤.

### 8.2 –°—Ü–µ–Ω–∞—Ä–∏–π Smart —Ä–µ–∂–∏–º–∞

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–¥–∞–Ω `OPENROUTER_API_KEY`.
2. –û—Ç–∫—Ä–æ–π—Ç–µ drawer –≤—ã–±–æ—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏ –æ—Ç–º–µ—Ç—å—Ç–µ –Ω—É–∂–Ω—ã–µ –∫–æ–Ω—Å–ø–µ–∫—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
3. –ù–∞–∂–º–∏—Ç–µ `–ù–∞—á–∞—Ç—å`.
4. –û—Ç–≤–µ—á–∞–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–º –∏–ª–∏ —á–µ—Ä–µ–∑ –º–∏–∫—Ä–æ—Ñ–æ–Ω.
5. –°–º–æ—Ç—Ä–∏—Ç–µ `feedback` –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞.
6. –ö–∞–∂–¥—ã–µ `ANALYZE_EVERY_N` –≤–æ–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏—Ö–æ–¥–∏—Ç –±–ª–æ–∫ `analysis`.

### 8.3 –°—Ü–µ–Ω–∞—Ä–∏–π Simple —Ä–µ–∂–∏–º–∞

1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ —Ç—É–º–±–ª–µ—Ä –≤ `Simple`.
2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Å–ø–µ–∫—Ç—ã –∏ –≤—ã—Å—Ç–∞–≤—å—Ç–µ –≤–µ—Å–∞ (–∞–≤—Ç–æ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ 100%).
3. –ù–∞–∂–º–∏—Ç–µ `–ù–∞—á–∞—Ç—å`.
4. –î–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –Ω–∞–∂–∏–º–∞–π—Ç–µ `–î–∞–ª–µ–µ`.
5. –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å —Ö–æ—Ç–∏—Ç–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–∑–∂–µ, –Ω–∞–∂–º–∏—Ç–µ `–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å`.
6. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–µ –≤–≤–æ–¥–∞ –∫–∞–∫ —á–∞—Ç –ø–æ —Ç–µ–∫—É—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É/—ç—Ç–∞–ª–æ–Ω–Ω–æ–º—É –æ—Ç–≤–µ—Ç—É.

### 8.4 –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥

–ú–µ—Ö–∞–Ω–∏–∫–∞:
- –∫–Ω–æ–ø–∫–∞ `üéôÔ∏è` –∑–∞–ø—É—Å–∫–∞–µ—Ç –∑–∞–ø–∏—Å—å;
- –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–ø–∏—Å—å;
- –∞—É–¥–∏–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ `POST /stt`;
- —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞;
- –∑–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ –æ–±—ã—á–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π `–û—Ç–ø—Ä–∞–≤–∏—Ç—å`.

---

<a id="protocol"></a>
## 9. WebSocket/HTTP –ø—Ä–æ—Ç–æ–∫–æ–ª

### 9.1 HTTP endpoints

- `GET /` -> UI (`index.html`)
- `POST /stt` -> `{ text, language, duration }`
- `GET /static/*` -> –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∞—Å—Å–µ—Ç—ã

### 9.2 WebSocket endpoint

- `WS /ws`

#### –ö–ª–∏–µ–Ω—Ç -> —Å–µ—Ä–≤–µ—Ä

- `start`: –∑–∞–ø—É—Å–∫ —Ä–µ–∂–∏–º–∞ (`smart` –∏–ª–∏ `simple`)
- `answer`: –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ `smart`
- `simple_chat`: —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç –≤ `simple`
- `next`: —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å –≤ `simple`
- `simple_skip`: –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å –≤ `simple`
- `reset`: —Å–±—Ä–æ—Å —Å–µ—Å—Å–∏–∏, –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ `hello`

#### –°–µ—Ä–≤–µ—Ä -> –∫–ª–∏–µ–Ω—Ç

- `hello`: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Ñ–∏–≥ —Å–µ—Å—Å–∏–∏
- `ready`: –ø—É—Ç–∏ `run_dir` –∏ `history_path`
- `status`: —Å—Ç–∞—Ç—É—Å –∞–≥–µ–Ω—Ç–∞/—ç—Ç–∞–ø–∞
- `event`: —Å–ª—É–∂–µ–±–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- `question`: –≤–æ–ø—Ä–æ—Å smart —Ä–µ–∂–∏–º–∞
- `simple_question`: –≤–æ–ø—Ä–æ—Å simple —Ä–µ–∂–∏–º–∞
- `simple_done`: –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ simple –ø—Ä–æ—Ö–æ–¥–∞
- `message`: —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `chat`: —á–∞—Ç-—Å–æ–æ–±—â–µ–Ω–∏—è simple —Ä–µ–∂–∏–º–∞
- `feedback`: –æ—Ü–µ–Ω–∫–∞ –æ—Ç–≤–µ—Ç–∞ –≤ smart —Ä–µ–∂–∏–º–µ
- `analysis`: –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- `counter`: –∑–Ω–∞—á–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤
- `need_input`: —Å–∏–≥–Ω–∞–ª –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞

---

<a id="logs"></a>
## 10. –õ–æ–≥–∏, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏ –≥–¥–µ —á—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å

–ù–∞ –∫–∞–∂–¥—É—é smart-—Å–µ—Å—Å–∏—é —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–∞—Ç–∞–ª–æ–≥:
- `runs/YYYYMMDD_HHMMSS/`

–í–Ω—É—Ç—Ä–∏:
- `history.jsonl`: –ø–æ–ª–Ω—ã–π –ª–æ–≥ –≤–æ–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤/–æ—Ü–µ–Ω–æ–∫;
- `topics_snapshot.json`: snapshot –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–µ–º –Ω–∞ –º–æ–º–µ–Ω—Ç —Å—Ç–∞—Ä—Ç–∞.

–§–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Å–∏ –≤ `history.jsonl` –≤–∫–ª—é—á–∞–µ—Ç:
- `ts`, `n`, `topic_id`, `topic_title`;
- `question`, `user_answer`, `expected`;
- `score`, `short_verdict`;
- `missing_points`, `incorrect_points`, `improvement_tips`, `ideal_answer`;
- `model`.

–î–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
- UI drawer `–û—Ç–ª–∞–¥–∫–∞` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `event` —Å–æ–æ–±—â–µ–Ω–∏—è;
- —Ç–∞–º –∂–µ –≤–∏–¥–Ω—ã –ø—É—Ç–∏ `run_dir`/`history_path`.

---

<a id="dev"></a>
## 11. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–¥–∞

### 11.1 –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
uvicorn app.main:app --reload --host 127.0.0.1 --port 8000
```

–ò–∑–º–µ–Ω–µ–Ω–∏—è:
- backend (`app/*.py`, `interview_coach_core/*.py`) -> –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑—è—Ç—Å—è —á–µ—Ä–µ–∑ `--reload`;
- frontend (`app/static/*`) -> –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ refresh —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

### 11.2 –ö—É–¥–∞ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ –∑–∞–¥–∞—á–∞–º

- –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Ç–µ–º/–≤–æ–ø—Ä–æ—Å–æ–≤ -> `interview_coach_core/strategy.py`;
- –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è/–∞–Ω–∞–ª–∏—Ç–∏–∫–∏ -> `interview_coach_core/prompts.py`;
- –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ markdown -> `interview_coach_core/parsing.py`;
- –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ ws -> `app/main.py` –∏ `app/static/app.js` —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ;
- UI/UX -> `app/static/index.html`, `app/static/style.css`, `app/static/app.js`.

### 11.3 –¢–µ—Å—Ç—ã

–û—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å–µ–π—á–∞—Å –Ω–µ—Ç.
–ï—Å–ª–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º:
- unit-—Ç–µ—Å—Ç—ã –¥–ª—è `parsing.py`;
- smoke-—Ç–µ—Å—Ç ws-—Å—Ü–µ–Ω–∞—Ä–∏—è `start -> question -> answer`.

---

<a id="troubleshooting"></a>
## 12. –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 12.1 `OPENROUTER_API_KEY –Ω–µ –∑–∞–¥–∞–Ω`

–°–∏–º–ø—Ç–æ–º:
- –≤ Smart —Ä–µ–∂–∏–º–µ —Å–∏—Å—Ç–µ–º–∞ –ø–∏—à–µ—Ç –æ—à–∏–±–∫—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

–ß—Ç–æ –¥–µ–ª–∞—Ç—å:
- –¥–æ–±–∞–≤–∏—Ç—å `OPENROUTER_API_KEY` –≤ `.env`;
- –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å `uvicorn`.

### 12.2 –ù–µ –≥—Ä—É–∑–∏—Ç—Å—è whisper / `/stt` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 503

–°–∏–º–ø—Ç–æ–º:
- `has_stt=false` –≤ `hello`;
- `/stt` –æ—Ç–≤–µ—á–∞–µ—Ç `Whisper model –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω`.

–ß—Ç–æ –¥–µ–ª–∞—Ç—å:
- –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `WHISPER_MODEL`, `WHISPER_DEVICE`, `WHISPER_COMPUTE_TYPE`;
- —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ö–≤–∞—Ç–∞–µ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏;
- —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å/–ø—Ä–æ–≤–µ—Ä–∏—Ç—å `ffmpeg`.

### 12.3 –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –æ—à–∏–±–∫–∞ –ø—Ä–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ markdown

–°–∏–º–ø—Ç–æ–º:
- startup –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π `–ù–µ –Ω–∞—à–µ–ª .md —Ñ–∞–π–ª–æ–≤ –≤ ...`.

–ß—Ç–æ –¥–µ–ª–∞—Ç—å:
- –ø–æ–ª–æ–∂–∏—Ç—å `.md` —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `NOTES_DIR` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `conspects/`).

### 12.4 JSON –æ—Ç LLM –∏–Ω–æ–≥–¥–∞ –ª–æ–º–∞–µ—Ç—Å—è

–°–º—è–≥—á–µ–Ω–∏–µ —É–∂–µ –µ—Å—Ç—å –≤ –∫–æ–¥–µ:
- `robust_json_load` –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–¥–µ–ª–∏—Ç—å JSON-–±–ª–æ–∫;
- –ø—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è recovery-–ø—Ä–æ–º–ø—Ç `–í–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û –≤–∞–ª–∏–¥–Ω—ã–π JSON...`.

–ß—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
- —É–º–µ–Ω—å—à–∏—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É/—Å–º–µ–Ω–∏—Ç—å –º–æ–¥–µ–ª—å;
- —É–∂–µ—Å—Ç–æ—á–∏—Ç—å —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ —Å—Ö–µ–º—ã –≤ `prompts.py`.

### 12.5 –í Simple —Ä–µ–∂–∏–º–µ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –µ—Å—Ç—å –ª–∏ –≤ —Ñ–∞–π–ª–∞—Ö —à–∞–±–ª–æ–Ω `###/#### –í–æ–ø—Ä–æ—Å: ...` + `**–û—Ç–≤–µ—Ç:**`;
- –æ—Ç–º–µ—á–µ–Ω—ã –ª–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –≤ drawer;
- –Ω–µ –ø—É—Å—Ç–æ–π –ª–∏ `simple_index` –≤ `hello`.

---

<a id="limitations"></a>
## 13. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- –Ω–µ—Ç auth/–∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –º—É–ª—å—Ç–∏–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –º–æ–¥–µ–ª–∏;
- –Ω–µ—Ç –ë–î, –≤—Å–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ;
- –ø–∞—Ä—Å–µ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —ç–≤—Ä–∏—Å—Ç–∏–∫–∞—Ö –∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ Markdown;
- –Ω–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–∞–∫–µ—Ç–∞;
- –Ω–µ—Ç rate-limit/retry/backoff —Å–ª–æ—è –¥–ª—è LLM API.

---

<a id="checklist"></a>
## 14. –ö—Ä–∞—Ç–∫–∏–π —á–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ–º

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `.env` (`OPENROUTER_API_KEY`, `OPENROUTER_MODEL`).
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É `conspects/*.md` –ø–æ–¥ –æ–±–∞ —Ä–µ–∂–∏–º–∞.
3. –ü—Ä–æ–≥–Ω–∞—Ç—å 30+ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ Smart —Ä–µ–∂–∏–º–µ (–º–∏–Ω–∏–º—É–º 1 —Ü–∏–∫–ª –∞–Ω–∞–ª–∏–∑–∞).
4. –ü–æ `analysis` –≤—ã–±—Ä–∞—Ç—å —Å–ª–∞–±—ã–µ —Ç–µ–º—ã –∏ –ø—Ä–æ–π—Ç–∏ –∏—Ö –≤ Simple —Ä–µ–∂–∏–º–µ —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º –≤–µ—Å–æ–º.
5. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å `runs/*/history.jsonl` –∏ –≤—ã–ø–∏—Å–∞—Ç—å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –æ—à–∏–±–∫–∏.

---

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π README –ø–æ–¥ –¥–µ–ø–ª–æ–π (Docker/systemd/reverse proxy), –ª—É—á—à–µ –≤—ã–Ω–µ—Å—Ç–∏ –µ–≥–æ –≤ `docs/DEPLOY.md`, —á—Ç–æ–±—ã —ç—Ç–æ—Ç —Ñ–∞–π–ª –æ—Å—Ç–∞–≤–∞–ª—Å—è –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∫ –∏–Ω—Ç–µ—Ä–≤—å—é.
